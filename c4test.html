<html>
	<head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script type="text/javascript">

var C4 = {
	sock : null,
	onmessage : function(msg) {
	},
	join : function() {
		this.sock.send("JOIN");
		this.onmessage = function(msg) {
			if ( msg == "JOIN_PENDING" ){
				addStatus("Waiting for other player");
			}	
		}
	}
};
function addStatus(text){
        var date = new Date();
        document.getElementById('status').innerHTML
                = document.getElementById('status').innerHTML
                + date + ": " + text + "<br/>";
}
function ready(){
        if ("MozWebSocket" in window) {
                WebSocket = MozWebSocket;
        }
        if ("WebSocket" in window) {
                // browser supports websockets
                var ws = new WebSocket("ws://localhost:8080/websocket");
		C4.sock = ws;
                ws.onopen = function() {
                        // websocket is connected
                        addStatus("websocket connected!");
                        // send hello data to server.
                        //ws.send("hello server!");
                        //addStatus("sent message to server: 'hello server'!");
                };
                ws.onmessage = function (evt) {
                        var receivedMsg = evt.data;
                        addStatus("server sent the following: '" + receivedMsg + "'");
			C4.onmessage(receivedMsg);
                };
                ws.onclose = function() {
                        // websocket was closed
                        addStatus("websocket was closed");
                };
        } else {
                // browser does not support websockets
                addStatus("sorry, your browser does not support websockets.");
        }
}



</script>
</head>
<body onload="ready();">

<div>
	<button onclick="C4.join()">Join a Game</button>
</div>
Hi!
<div id="status"></div>

</body></html>
